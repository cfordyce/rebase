<html>
<head>
<title>The C Preprocessor</title>
<link rel=StyleSheet href=../gnuinfo.css>
</head>
<body>
<h1>The C Preprocessor - Invocation</h1>
Node: <a href="Invocation.html">Invocation</a>
Next: <a href="Concept_Index.html">Concept Index</a>
Prev: <a href="Output.html">Output</a>
Up: <a href="Top.html">Top</a>
<hr>
<h3>Invoking the C Preprocessor</h3>
<p>
Most often when you use the C preprocessor you will not have to invoke it explicitly: the C compiler will do so automatically. However, the preprocessor is sometimes useful on its own. <p>
The C preprocessor expects two file names as arguments, <i>infile</i> and <i>outfile</i>. The preprocessor reads <i>infile</i> together with any other files it specifies with `<samp>#include</samp>'. All the output generated by the combined input files is written in <i>outfile</i>. <p>
Either <i>infile</i> or <i>outfile</i> may be `<samp>-</samp>', which as <i>infile</i> means to read from standard input and as <i>outfile</i> means to write to standard output. Also, if <i>outfile</i> or both file names are omitted, the standard output and standard input are used for the omitted file names. <p>
Here is a table of command options accepted by the C preprocessor. These options can also be given when compiling a C program; they are passed along automatically to the preprocessor when it is invoked by the compiler. <p>
<dl>
<dt>
`<samp>-P</samp>'<dd>
Inhibit generation of `<samp>#</samp>'-lines with line-number information in the output from the preprocessor (see <a href="Output.html">Output</a>). This might be useful when running the preprocessor on something that is not C code and will be sent to a program which might be confused by the `<samp>#</samp>'-lines. <p>
<dt>
`<samp>-C</samp>'<dd>
Do not discard comments: pass them through to the output file. Comments appearing in arguments of a macro call will be copied to the output before the expansion of the macro call. <p>
<dt>
`<samp>-traditional</samp>'<dd>
Try to imitate the behavior of old-fashioned C, as opposed to ANSI C. <p>
<ul>
<li><p>
Traditional macro expansion pays no attention to singlequote or doublequote characters; macro argument symbols are replaced by the argument values even when they appear within apparent string or character constants. <p>
<li><p>
Traditionally, it is permissible for a macro expansion to end in the middle of a string or character constant. The constant continues into the text surrounding the macro call. <p>
<li><p>
However, traditionally the end of the line terminates a string or character constant, with no error. <p>
<li><p>
In traditional C, a comment is equivalent to no text at all. (In ANSI C, a comment counts as whitespace.) <p>
<li><p>
Traditional C does not have the concept of a ``preprocessing number''. It considers `<samp>1.0e+4</samp>' to be three tokens: `<samp>1.0e</samp>', `<samp>+</samp>', and `<samp>4</samp>'. <p>
<li><p>
A macro is not suppressed within its own definition, in traditional C. Thus, any macro that is used recursively inevitably causes an error. <p>
<li><p>
The character `<samp>#</samp>' has no special meaning within a macro definition in traditional C. <p>
<li><p>
In traditional C, the text at the end of a macro expansion can run together with the text after the macro call, to produce a single token. (This is impossible in ANSI C.) <p>
<li><p>
Traditionally, `<samp>\</samp>' inside a macro argument suppresses the syntactic significance of the following character. </ul>
<p>
<dt>
`<samp>-trigraphs</samp>'<dd>
Process ANSI standard trigraph sequences. These are three-character sequences, all starting with `<samp>??</samp>', that are defined by ANSI C to stand for single characters. For example, `<samp>??/</samp>' stands for `<samp>\</samp>', so `<samp>'??/n'</samp>' is a character constant for a newline. Strictly speaking, the GNU C preprocessor does not support all programs in ANSI Standard C unless `<samp>-trigraphs</samp>' is used, but if you ever notice the difference it will be with relief. <p>
You don't want to know any more about trigraphs. <p>
<dt>
`<samp>-pedantic</samp>'<dd>
Issue warnings required by the ANSI C standard in certain cases such as when text other than a comment follows `<samp>#else</samp>' or `<samp>#endif</samp>'. <p>
<dt>
`<samp>-pedantic-errors</samp>'<dd>
Like `<samp>-pedantic</samp>', except that errors are produced rather than warnings. <p>
<dt>
`<samp>-Wtrigraphs</samp>'<dd>
Warn if any trigraphs are encountered (assuming they are enabled). <p>
<dt>
`<samp>-Wcomment</samp>'<dd>
Warn whenever a comment-start sequence `<samp>/*</samp>' appears in a comment. <p>
<dt>
`<samp>-Wall</samp>'<dd>
Requests both `<samp>-Wtrigraphs</samp>' and `<samp>-Wcomment</samp>' (but not `<samp>-Wtraditional</samp>'). <p>
<dt>
`<samp>-Wtraditional</samp>'<dd>
Warn about certain constructs that behave differently in traditional and ANSI C. <p>
<dt>
`<samp>-I <i>directory</i></samp>'<dd>
Add the directory <i>directory</i> to the head of the list of directories to be searched for header files (see <a href="Include_Syntax.html">Include Syntax</a>). This can be used to override a system header file, substituting your own version, since these directories are searched before the system header file directories. If you use more than one `<samp>-I</samp>' option, the directories are scanned in left-to-right order; the standard system directories come after. <p>
<dt>
`<samp>-I-</samp>'<dd>
Any directories specified with `<samp>-I</samp>' options before the `<samp>-I-</samp>' option are searched only for the case of `<samp>#include "<i>file</i>"</samp>'; they are not searched for `<samp>#include &lt;<i>file</i>&gt;</samp>'. <p>
If additional directories are specified with `<samp>-I</samp>' options after the `<samp>-I-</samp>', these directories are searched for all `<samp>#include</samp>' directives. <p>
In addition, the `<samp>-I-</samp>' option inhibits the use of the current directory as the first search directory for `<samp>#include "<i>file</i>"</samp>'. Therefore, the current directory is searched only if it is requested explicitly with `<samp>-I.</samp>'. Specifying both `<samp>-I-</samp>' and `<samp>-I.</samp>' allows you to control precisely which directories are searched before the current one and which are searched after. <p>
<dt>
`<samp>-nostdinc</samp>'<dd>
Do not search the standard system directories for header files. Only the directories you have specified with `<samp>-I</samp>' options (and the current directory, if appropriate) are searched. <p>
<dt>
`<samp>-nostdinc++</samp>'<dd>
Do not search for header files in the C++-specific standard directories, but do still search the other standard directories. (This option is used when building libg++.) <p>
<dt>
`<samp>-D <i>name</i></samp>'<dd>
Predefine <i>name</i> as a macro, with definition `<samp>1</samp>'. <p>
<dt>
`<samp>-D <i>name</i>=<i>definition</i></samp>'<dd>
Predefine <i>name</i> as a macro, with definition <i>definition</i>. There are no restrictions on the contents of <i>definition</i>, but if you are invoking the preprocessor from a shell or shell-like program you may need to use the shell's quoting syntax to protect characters such as spaces that have a meaning in the shell syntax. If you use more than one `<samp>-D</samp>' for the same <i>name</i>, the rightmost definition takes effect. <p>
<dt>
`<samp>-U <i>name</i></samp>'<dd>
Do not predefine <i>name</i>. If both `<samp>-U</samp>' and `<samp>-D</samp>' are specified for one name, the `<samp>-U</samp>' beats the `<samp>-D</samp>' and the name is not predefined. <p>
<dt>
`<samp>-undef</samp>'<dd>
Do not predefine any nonstandard macros. <p>
<dt>
`<samp>-A <i>predicate</i>(<i>answer</i>)</samp>'<dd>
Make an assertion with the predicate <i>predicate</i> and answer <i>answer</i>. See <a href="Assertions.html">Assertions</a>. <p>
You can use `<samp>-A-</samp>' to disable all predefined assertions; it also undefines all predefined macros that identify the type of target system. <p>
<dt>
`<samp>-dM</samp>'<dd>
Instead of outputting the result of preprocessing, output a list of `<samp>#define</samp>' directives for all the macros defined during the execution of the preprocessor, including predefined macros. This gives you a way of finding out what is predefined in your version of the preprocessor; assuming you have no file `<samp>foo.h</samp>', the command <p>
<pre>
	touch foo.h; cpp -dM foo.h
</pre>
<p>
will show the values of any predefined macros. <p>
<dt>
`<samp>-dD</samp>'<dd>
Like `<samp>-dM</samp>' except in two respects: it does <em>not</em> include the predefined macros, and it outputs <em>both</em> the `<samp>#define</samp>' directives and the result of preprocessing. Both kinds of output go to the standard output file. <p>
<dt>
`<samp>-M [-MG]</samp>'<dd>
Instead of outputting the result of preprocessing, output a rule suitable for <code>make</code>  describing the dependencies of the main source file. The preprocessor outputs one <code>make</code>  rule containing the object file name for that source file, a colon, and the names of all the included files. If there are many included files then the rule is split into several lines using `<samp>\</samp>'-newline. <p>
`<samp>-MG</samp>' says to treat missing header files as generated files and assume they live in the same directory as the source file. It must be specified in addition to `<samp>-M</samp>'. <p>
This feature is used in automatic updating of makefiles. <p>
<dt>
`<samp>-MM [-MG]</samp>'<dd>
Like `<samp>-M</samp>' but mention only the files included with `<samp>#include "<i>file</i>"</samp>'. System header files included with `<samp>#include &lt;<i>file</i>&gt;</samp>' are omitted. <p>
<dt>
`<samp>-MD <i>file</i></samp>'<dd>
Like `<samp>-M</samp>' but the dependency information is written to <i>file</i>. This is in addition to compiling the file as specified---`<samp>-MD</samp>' does not inhibit ordinary compilation the way `<samp>-M</samp>' does. <p>
When invoking gcc, do not specify the <i>file</i> argument. Gcc will create file names made by replacing ".c" with ".d" at the end of the input file names. <p>
In Mach, you can use the utility <code>md</code>  to merge multiple dependency files into a single dependency file suitable for using with the `<samp>make</samp>' command. <p>
<dt>
`<samp>-MMD <i>file</i></samp>'<dd>
Like `<samp>-MD</samp>' except mention only user header files, not system header files. <p>
<dt>
`<samp>-H</samp>'<dd>
Print the name of each header file used, in addition to other normal activities. <p>
<dt>
`<samp>-imacros <i>file</i></samp>'<dd>
Process <i>file</i> as input, discarding the resulting output, before processing the regular input file. Because the output generated from <i>file</i> is discarded, the only effect of `<samp>-imacros <i>file</i></samp>' is to make the macros defined in <i>file</i> available for use in the main input. <p>
<dt>
`<samp>-include <i>file</i></samp>'<dd>
Process <i>file</i> as input, and include all the resulting output, before processing the regular input file. <p>
<dt>
`<samp>-idirafter <i>dir</i></samp>'<dd>
Add the directory <i>dir</i> to the second include path. The directories on the second include path are searched when a header file is not found in any of the directories in the main include path (the one that `<samp>-I</samp>' adds to). <p>
<dt>
`<samp>-iprefix <i>prefix</i></samp>'<dd>
Specify <i>prefix</i> as the prefix for subsequent `<samp>-iwithprefix</samp>' options. <p>
<dt>
`<samp>-iwithprefix <i>dir</i></samp>'<dd>
Add a directory to the second include path. The directory's name is made by concatenating <i>prefix</i> and <i>dir</i>, where <i>prefix</i> was specified previously with `<samp>-iprefix</samp>'. <p>
<dt>
`<samp>-isystem <i>dir</i></samp>'<dd>
Add a directory to the beginning of the second include path, marking it as a system directory, so that it gets the same special treatment as is applied to the standard system directories. <p>
<dt>
`<samp>-lang-c</samp>'<dd>
<dt>
`<samp>-lang-c++</samp>'<dd>
<dt>
`<samp>-lang-objc</samp>'<dd>
<dt>
`<samp>-lang-objc++</samp>'<dd>
Specify the source language. `<samp>-lang-c++</samp>' makes the preprocessor handle C++ comment syntax (comments may begin with `<samp>//</samp>', in which case they end at end of line), and includes extra default include directories for C++; and `<samp>-lang-objc</samp>' enables the Objective C `<samp>#import</samp>' directive. `<samp>-lang-c</samp>' explicitly turns off both of these extensions, and `<samp>-lang-objc++</samp>' enables both. <p>
These options are generated by the compiler driver <code>gcc</code> , but not passed from the `<samp>gcc</samp>' command line. <p>
<dt>
`<samp>-lint</samp>'<dd>
Look for commands to the program checker <code>lint</code>  embedded in comments, and emit them preceded by `<samp>#pragma lint</samp>'. For example, the comment `<samp>/* NOTREACHED */</samp>' becomes `<samp>#pragma lint NOTREACHED</samp>'. <p>
This option is available only when you call <code>cpp</code>  directly; <code>gcc</code>  will not pass it from its command line. <p>
<dt>
`<samp>-$</samp>'<dd>
Forbid the use of `<samp>$</samp>' in identifiers. This is required for ANSI conformance. <code>gcc</code>  automatically supplies this option to the preprocessor if you specify `<samp>-ansi</samp>', but <code>gcc</code>  doesn't recognize the `<samp>-$</samp>' option itself---to use it without the other effects of `<samp>-ansi</samp>', you must call the preprocessor directly. <p>
</dl>
<p>
<hr>
Next: <a href="Concept_Index.html">Concept Index</a>
Up: <a href="Top.html">Top</a>
</body></html>